"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[449],{8985:function(e,t,n){n.d(t,{b:function(){return d}});var a=n(5893),r=n(7294),s=n(1163),o=n(471),i=n(1355),c=n(4413),l=n(2767);function d(e){var t,n,d=e.schema,u=e.formFactor,p=e.permissions,m=(0,s.useRouter)(),f=m.query,v=f.app_id,h=f.tab_id,b=f.record_id,g=(0,r.useState)(null),x=g[0],y=g[1],j=(0,r.useState)(null),w=j[0],I=j[1];return(0,r.useEffect)((function(){d&&(!function(e){var t=[];e&&e.uiSchema&&(null===p||void 0===p?void 0:p.allowEdit)&&t.push({label:"\u7f16\u8f91",name:"edit",todo:function(t){c.QU.standard_edit.call({},t,{recordId:b,appId:v,uiSchema:e.uiSchema,formFactor:u,router:m,options:{props:{width:"100%",style:{width:"100%"},bodyStyle:{padding:"0px",paddingTop:"0px"}}}})}}),t=_.concat(t,(0,c.vU)(e.uiSchema,{app_id:v,tab_id:h,router:m})),t=_.concat(t,(0,c.ud)(e.uiSchema,{app_id:v,tab_id:h,router:m})),I(t)}(d),window.addEventListener("message",(function(e){var t=e.data;if("record.loaded"===t.type){var n=t.record;y(n)}})))}),[d]),(0,a.jsx)("div",{className:"slds-page-header slds-page-header_record-home shadow-none border-none bg-slate-50",children:(0,a.jsxs)("div",{className:"slds-page-header__row",children:[(0,a.jsx)("div",{className:"slds-page-header__col-title",children:(0,a.jsxs)("div",{className:"slds-media",children:[(0,a.jsx)("div",{className:"slds-media__figure",children:(0,a.jsx)("span",{className:"slds-icon_container slds-icon-standard-opportunity",children:(0,a.jsx)("svg",{className:"slds-icon slds-page-header__icon","aria-hidden":"true",children:(0,a.jsx)("use",{xlinkHref:"/assets/icons/standard-sprite/svg/symbols.svg#".concat(d.uiSchema.icon)})})})}),(0,a.jsx)("div",{className:"slds-media__body",children:(0,a.jsx)("div",{className:"slds-page-header__name",children:(0,a.jsx)("div",{className:"slds-page-header__name-title",children:(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)("span",{children:null===d||void 0===d||null===(t=d.uiSchema)||void 0===t?void 0:t.label}),(0,a.jsx)("span",{className:"slds-page-header__title slds-truncate",children:x?x[null===d||void 0===d||null===(n=d.uiSchema)||void 0===n?void 0:n.NAME_FIELD_KEY]:""})]})})})})]})}),(0,a.jsx)("div",{className:"slds-page-header__col-actions",children:(0,a.jsx)("div",{className:"slds-page-header__controls",children:(0,a.jsx)("div",{className:"slds-page-header__control",children:(0,a.jsx)("ul",{className:"slds-button-group-list",children:(0,a.jsx)(a.Fragment,{children:(null===w||void 0===w?void 0:w.length)>0&&(0,a.jsx)("li",{children:(0,a.jsxs)(o.v,{as:"div",className:"slds-dropdown-trigger slds-dropdown-trigger_click",children:[(0,a.jsx)("div",{children:(0,a.jsx)(o.v.Button,{className:"border-0",children:(0,a.jsx)("div",{children:(0,a.jsx)("svg",{className:"slds-icon slds-icon-text-default slds-icon_x-small","aria-hidden":"true",children:(0,a.jsx)("use",{xlinkHref:"/assets/icons/utility-sprite/svg/symbols.svg#threedots_vertical"})})})})}),(0,a.jsx)(i.u,{as:r.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,a.jsx)(o.v.Items,{className:"absolute right-0 z-10 mt-1 w-56 origin-top-right divide-y divide-gray-100 bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:rounded-[2px]",children:(0,a.jsx)("div",{className:"",children:null===w||void 0===w?void 0:w.map((function(e,t){return(0,a.jsx)(o.v.Item,{children:function(t){var n=t.active;return(0,a.jsx)(l.z,{button:e,inMore:!0,data:{app_id:v,tab_id:h,object_name:d.uiSchema.name},className:"".concat(n?"bg-violet-500 text-white":"text-gray-900"," slds-dropdown__item group flex w-full items-center border-0 px-2 py-2")})}},t)}))})})})]})})})})})})})]})})}},2767:function(e,t,n){n.d(t,{z:function(){return c}});var a=n(6042),r=n(5893),s=n(3796),o=n(4413),i=n(1163);function c(e){var t=(0,i.useRouter)(),n=e.button,c=e.data,l=e.className,d=e.scopeClassName,u=e.inMore,p=c.dataComponentId;if("amis_action"===n.type){var m={type:"service",bodyClassName:"p-0",body:[{type:"button",label:n.label,className:"".concat(u?"flex w-full items-center border-0 px-2 py-1":"bg-white"," ").concat(l||""),onEvent:{click:{actions:JSON.parse(n.amis_actions)}}}],regions:["body"],data:(0,a.Z)({},c)};return(0,r.jsx)(s.k,{id:SteedosUI.getRefId({type:"button",appId:c.app_id,name:n.name}),schema:m,router:t,className:d})}return(0,r.jsx)("button",{onClick:function(){return(0,o.ht)(n,Object.assign({},c,{scope:SteedosUI.getRef(p)}))},className:"antd-Button antd-Button--default ".concat(l||""),children:n.label})}},2917:function(e,t,n){n.d(t,{b:function(){return d}});var a=n(5893),r=n(7294),s=n(1163),o=n(471),i=n(1355),c=n(4413),l=n(2767);function d(e){var t,n,d=e.schema,u=e.formFactor,p=e.permissions,m=(0,s.useRouter)(),f=m.query,v=f.app_id,h=f.tab_id,b=f.record_id,g=(0,r.useState)(null),_=g[0],x=g[1],y=(0,r.useState)(null),j=y[0],w=y[1],I=(0,r.useState)(null),N=I[0],S=I[1];return(0,r.useEffect)((function(){d&&(!function(e){e&&e.uiSchema&&(w((0,c.vU)(e.uiSchema,{app_id:v,tab_id:h,router:m})),S((0,c.ud)(e.uiSchema,{app_id:v,tab_id:h,router:m})))}(d),window.addEventListener("message",(function(e){var t=e.data;if("record.loaded"===t.type){var n=t.record;x(n)}})))}),[d]),(0,a.jsx)("div",{className:"slds-page-header slds-page-header_record-home bg-transparent shadow-none border-none pb-0",children:(0,a.jsxs)("div",{className:"slds-page-header__row",children:[(0,a.jsx)("div",{className:"slds-page-header__col-title",children:(0,a.jsxs)("div",{className:"slds-media",children:[(0,a.jsx)("div",{className:"slds-media__figure",children:(0,a.jsx)("span",{className:"slds-icon_container slds-icon-standard-opportunity",children:(0,a.jsx)("svg",{className:"slds-icon slds-page-header__icon","aria-hidden":"true",children:(0,a.jsx)("use",{xlinkHref:"/assets/icons/standard-sprite/svg/symbols.svg#".concat(d.uiSchema.icon)})})})}),(0,a.jsx)("div",{className:"slds-media__body",children:(0,a.jsx)("div",{className:"slds-page-header__name",children:(0,a.jsx)("div",{className:"slds-page-header__name-title",children:(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)("span",{children:null===d||void 0===d||null===(t=d.uiSchema)||void 0===t?void 0:t.label}),(0,a.jsx)("span",{className:"slds-page-header__title slds-truncate",children:_?_[null===d||void 0===d||null===(n=d.uiSchema)||void 0===n?void 0:n.NAME_FIELD_KEY]:""})]})})})})]})}),(0,a.jsx)("div",{className:"slds-page-header__col-actions",children:(0,a.jsx)("div",{className:"slds-page-header__controls",children:(0,a.jsxs)("div",{className:"slds-page-header__control space-x-1",children:[(null===p||void 0===p?void 0:p.allowEdit)&&(0,a.jsx)("button",{onClick:function(e){c.QU.standard_edit.call({},e,{recordId:b,appId:v,uiSchema:d.uiSchema,formFactor:u,router:m})},className:"antd-Button antd-Button--default",children:"\u7f16\u8f91"}),(0,a.jsxs)(a.Fragment,{children:[null===j||void 0===j?void 0:j.map((function(e){return(0,a.jsx)(l.z,{button:e,data:{app_id:v,tab_id:h,object_name:d.uiSchema.name,dataComponentId:"".concat(v,"-").concat(h,"-").concat(b)},scopeClassName:"inline-block"},e.name)})),(null===N||void 0===N?void 0:N.length)>0&&(0,a.jsxs)(o.v,{as:"div",className:"slds-dropdown-trigger slds-dropdown-trigger_click",children:[(0,a.jsx)("div",{children:(0,a.jsx)(o.v.Button,{className:"slds-button slds-button_icon-border-filled slds-button_last",children:(0,a.jsx)("div",{children:(0,a.jsx)("svg",{focusable:"false","data-key":"down","aria-hidden":"true",className:"slds-button__icon",children:(0,a.jsx)("use",{xlinkHref:"/assets/icons/utility-sprite/svg/symbols.svg#down"})})})})}),(0,a.jsx)(i.u,{as:r.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,a.jsx)(o.v.Items,{className:"absolute right-0 z-10 mt-1 w-56 origin-top-right divide-y divide-gray-100 bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:rounded-[2px]",children:(0,a.jsx)("div",{className:"",children:N.map((function(e,t){return(0,a.jsx)(o.v.Item,{children:function(t){var n=t.active;return(0,a.jsx)(l.z,{button:e,inMore:!0,data:{app_id:v,tab_id:h,object_name:d.uiSchema.name},className:"".concat(n?"bg-violet-500 text-white":"text-gray-900"," slds-dropdown__item group flex w-full items-center border-0 px-2 py-2")})}},t)}))})})})]})]})]})})})]})})}},5125:function(e,t,n){n.d(t,{B:function(){return u}});var a=n(4924),r=n(5893),s=n(4413),o=n(1163),i=n(7294),c=n(2767),l=n(3796),d=n(8282);function u(e){var t,n,u=e.app_id,p=e.tab_id,m=e.schema,f=e.refId,v=e.foreign_key,h=e.record_id,b=e.object_name,g=e.masterObjectName,_=e.inMore,x=e.formFactor,y=(0,i.useState)(null),j=y[0],w=y[1],I=(0,o.useRouter)();(0,i.useEffect)((function(){m&&m.uiSchema&&w((0,s.Iv)(m.uiSchema,{app_id:u,tab_id:p,router:I}))}),[m]);var N=(0,d.Z0)(),S={type:"page",bodyClassName:"p-0",body:[{type:"form",title:"\u8868\u5355",body:[{type:"input-file",label:"",name:"file",id:"u:a58d02614e04",btnLabel:"\u4e0a\u4f20",btnClassName:"m-0",multiple:!1,maxLength:10,submitType:"asUpload",uploadType:"fileReceptor",proxy:!1,drag:!1,autoUpload:!0,useChunk:!1,joinValues:!1,extractValue:!1,valueField:"version_id",receiver:{url:"${context.rootUrl}/s3",headers:{Authorization:"Bearer ${context.tenantId},${context.authToken}"},method:"post",messages:{},dataType:"form-data",requestAdaptor:"\n                        api.data.append('record_id', '".concat(h,"');\n                        api.data.append('object_name', '").concat(g,"');\n                        api.data.append('space', '").concat(N.spaceId,"');\n                        api.data.append('owner', '").concat(N.userId,"');\n                        api.data.append('owner_name', '").concat(N.name,"');\n                        return api;\n                      ")},onEvent:{success:{weight:0,actions:[{componentId:"u:5f901c0b917b",args:{},actionType:"clear"},{componentId:"",args:{msgType:"success",position:"top-right",closeButton:!0,showIcon:!0,msg:"\u4e0a\u4f20\u6210\u529f"},actionType:"toast"},{componentId:"",args:{},actionType:"custom",script:"\n                                SteedosUI.getRef('".concat(f,"').getComponentByName('page.listview_").concat(b,'\').handleAction({}, { actionType: "reload"})\n                            ')}]}}}],id:"u:5f901c0b917b",wrapWithPanel:!1}],regions:["body"],data:{}};return(0,r.jsx)(r.Fragment,{children:(null===m||void 0===m?void 0:m.uiSchema)&&(0,r.jsxs)(r.Fragment,{children:[(null===m||void 0===m||null===(t=m.uiSchema)||void 0===t||null===(n=t.permissions)||void 0===n?void 0:n.allowCreate)&&(0,r.jsxs)(r.Fragment,{children:["cms_files"!=m.uiSchema.name&&(0,r.jsx)("button",{onClick:function(e){s.QU.standard_new.call({},e,{listViewId:f,appId:u,uiSchema:m.uiSchema,formFactor:x,router:I,data:{data:(0,a.Z)({},v,h)}})},className:_?"flex w-full items-center border-0 px-2 py-1":"slds-button slds-button_neutral",children:"\u65b0\u5efa"}),"cms_files"===m.uiSchema.name&&(0,r.jsx)(l.k,{id:SteedosUI.getRefId({type:"button",appId:u,name:"upload"}),schema:S,router:I,className:"inline-block"})]}),null===j||void 0===j?void 0:j.map((function(e){return(0,r.jsx)(c.z,{button:e,inMore:_,data:{app_id:u,tab_id:p,object_name:m.uiSchema.name,dataComponentId:SteedosUI.getRefId({type:"listview",appId:u,name:m.uiSchema.name})},className:_?"flex items-center border-0 px-2 py-1":"",scopeClassName:"inline-block"},e.name)}))]})})}},4413:function(e,t,n){n.d(t,{ht:function(){return v},Iv:function(){return p},vU:function(){return m},ud:function(){return f},QU:function(){return d}});var a=n(6486),r=n.n(a),s="__G_L_O_B_A_L__",o=function(e){var t;return"string"===typeof e?1===(t=e.split(".")).length?"#":(t.pop(),t.join(".")):"#"},i=function(e,t){return"#"!==t&&t?"string"===typeof t?a.get(e,t):void console.error("path has to be a string"):e||{}},c=n(7733),l=function(e,t){if(e._visible&&(r().startsWith(r().trim(e._visible),"function")?(window.eval("var fun = "+e._visible),e.visible=fun):function(e){var t,n,a;return"string"===typeof e&&(t=/^{{(.+)}}$/,n=/^{{(function.+)}}$/,a=/^{{(.+=>.+)}}$/,!("string"!==typeof e||!e.match(t)||e.match(n)||e.match(a)))}(e._visible)&&(e.visible=function(t){!function(e,t,n,a){var r,c,l,d,u,p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(void 0===t&&(t={}),d=o(n),l=i(t,d)||{},"string"!==typeof e)return e;c=e.substring(2,e.length-2),u="\n  var $user=".concat(JSON.stringify(p),";   return ")+c.replace(/\bformData\b/g,JSON.stringify(t).replace(/\bglobal\b/g,s)).replace(/\bglobal\b/g,JSON.stringify(a)).replace(new RegExp("\\b"+s+"\\b","g"),"global").replace(/rootValue/g,JSON.stringify(l));try{Function(u)()}catch(m){return r=m,console.log(r,e,n),e}}(e._visible,t.record,"#",{now:new Date},t.userSession)})),!r().isFunction(e.visible))return e.visible;try{return e.visible(t)}catch(n){}},d={standard_new:function(e,t){var n=t.appId,a=t.listViewId,r=t.uiSchema,s=t.formFactor,o=t.data,i=t.router,l=t.options,d=void 0===l?{}:l,u=c.Z.listView.newRecordMode;SteedosUI.Object.newRecord({onSubmitted:function(){SteedosUI.getRef(a).getComponentByName("page.listview_".concat(r.name)).handleAction({},{actionType:"reload"})},onCancel:function(){SteedosUI.getRef(a).getComponentByName("page.listview_".concat(r.name)).handleAction({},{actionType:"reload"})},appId:n,formFactor:s,name:SteedosUI.getRefId({type:"".concat(u,"-form")}),title:"\u65b0\u5efa ".concat(r.label),objectName:r.name,data:o,recordId:"new",type:u,options:d,router:i})},standard_edit:function(e,t){var n=c.Z.listView.newRecordMode,a=t.appId,r=t.recordId,s=t.uiSchema,o=t.formFactor,i=t.router,l=t.options,d=void 0===l?{}:l;SteedosUI.Object.editRecord({appId:a,name:SteedosUI.getRefId({type:"".concat(n,"-form")}),title:"\u7f16\u8f91 ".concat(s.label),objectName:s.name,recordId:r,type:n,options:d,router:i,formFactor:o,onSubmitted:function(){SteedosUI.getRef(SteedosUI.getRefId({type:"detail",appId:a,name:s.name})).getComponentById("detail_".concat(r)).reload()}})},standard_delete:function(e,t){},batch_delete:function(e,t){var n=t.listViewId,a=t.uiSchema,s=SteedosUI.getRef(n).getComponentByName("page.listview_".concat(a.name));r().isEmpty(s.props.store.toJSON().selectedItems)?s.handleAction({},{actionType:"toast",toast:{items:[{position:"top-right",body:"\u8bf7\u9009\u62e9\u8981\u5220\u9664\u7684\u9879"}]}}):s.handleBulkAction(s.props.store.toJSON().selectedItems,[],{},s.props.bulkActions[0])}},u=function(e,t){var n=e.permissions.disabled_actions,a=r().sortBy(r().values(e.actions),"sort");return r().has(e,"allow_customActions")&&(a=r().filter(a,(function(t){return r().include(e.allow_customActions,t.name)}))),r().has(e,"exclude_actions")&&(a=r().filter(a,(function(t){return!r().include(e.exclude_actions,t.name)}))),r().each(a,(function(e){t.isMobile&&["record","record_only"].indexOf(e.on)>-1&&"standard_edit"!=e.name&&("record_only"==e.on?e.on="record_only_more":e.on="record_more")})),t.isMobile&&["cms_files","cfs.files.filerecord"].indexOf(e.name)>-1&&r().map(a,(function(e){"standard_edit"===e.name&&(e.on="record_more"),"download"===e.name&&(e.on="record")})),r().filter(a,(function(e){return r().indexOf(n,e.name)<0}))},p=function(e,t){var n=u(e,t);return r().filter(n,(function(e){return"list"==e.on&&l(e,t)}))},m=function(e,t){var n=u(e,t);return r().filter(n,(function(e){return("record"==e.on||"record_only"==e.on)&&l(e,t)}))},f=function(e,t){var n=u(e,t);return r().filter(n,(function(e){return("record_more"==e.on||"record_only_more"==e.on)&&l(e,t)}))},v=function(e,t){if(e.todo)return r().isString(e.todo)&&r().startsWith(r().trim(e.todo),"function")&&(window.eval("var fun = "+e.todo),e.todo=fun),r().isFunction(e.todo)?e.todo.apply({},[t]):void 0}},237:function(e,t,n){n.d(t,{Q:function(){return l},r:function(){return c}});var a=n(7568),r=n(4051),s=n.n(r),o=n(8282),i=n(6486),c=function(){var e=(0,a.Z)(s().mark((function e(t,n){var a,r,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],(0,i.each)(n,(function(e){a.push("".concat(e.object_name,": ").concat(e.object_name,'__count(filters: [["').concat(e.foreign_key,'","=","').concat(t,'"]])'))})),r="\n    {\n        ".concat(a.join(","),"\n    }\n    "),e.next=5,(0,o.Io)("/graphql",{method:"POST",body:JSON.stringify({query:r})});case 5:return c=e.sent,e.abrupt("return",c.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.Z)(s().mark((function e(t,n){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.Io)("/service/api/@".concat(t,"/recordPermissions/").concat(n),{method:"GET"});case 2:return a=e.sent,console.log("result",a),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},9808:function(e,t,n){n.d(t,{O:function(){return A}});var a=n(7294),r=n(2351),s=n(9946),o=n(2984),i=n(1363),c=n(4575),l=n(6723),d=n(3784),u=n(4157),p=n(3855),m=n(6045);function f({onFocus:e}){let[t,n]=(0,a.useState)(!0);return t?a.createElement(m._,{as:"button",type:"button",features:m.A.Focusable,onFocus:t=>{t.preventDefault();let a,r=50;a=requestAnimationFrame((function t(){if(!(r--<=0))return e()?(n(!1),void cancelAnimationFrame(a)):void(a=requestAnimationFrame(t));a&&cancelAnimationFrame(a)}))}}):null}var v,h=n(3781),b=((v=b||{})[v.SetSelectedIndex=0]="SetSelectedIndex",v[v.RegisterTab=1]="RegisterTab",v[v.UnregisterTab=2]="UnregisterTab",v[v.RegisterPanel=3]="RegisterPanel",v[v.UnregisterPanel=4]="UnregisterPanel",v[v.ForceRerender=5]="ForceRerender",v);let g={0(e,t){let n=e.tabs.filter((e=>{var t;return!(null!=(t=e.current)&&t.hasAttribute("disabled"))}));if(t.index<0)return{...e,selectedIndex:e.tabs.indexOf(n[0])};if(t.index>e.tabs.length)return{...e,selectedIndex:e.tabs.indexOf(n[n.length-1])};let a=e.tabs.slice(0,t.index),r=[...e.tabs.slice(t.index),...a].find((e=>n.includes(e)));return r?{...e,selectedIndex:e.tabs.indexOf(r)}:e},1:(e,t)=>e.tabs.includes(t.tab)?e:{...e,tabs:(0,c.z2)([...e.tabs,t.tab],(e=>e.current))},2:(e,t)=>({...e,tabs:(0,c.z2)(e.tabs.filter((e=>e!==t.tab)),(e=>e.current))}),3:(e,t)=>e.panels.includes(t.panel)?e:{...e,panels:[...e.panels,t.panel]},4:(e,t)=>({...e,panels:e.panels.filter((e=>e!==t.panel))}),5:e=>({...e})},_=(0,a.createContext)(null);function x(e){let t=(0,a.useContext)(_);if(null===t){let t=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,x),t}return t}_.displayName="TabsSSRContext";let y=(0,a.createContext)(null);function j(e){let t=(0,a.useContext)(y);if(null===t){let t=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,j),t}return t}y.displayName="TabsDataContext";let w=(0,a.createContext)(null);function I(e){let t=(0,a.useContext)(w);if(null===t){let t=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,I),t}return t}function N(e,t){return(0,o.E)(t.type,g,e,t)}w.displayName="TabsActionsContext";let S=a.Fragment,T=(0,r.yV)((function(e,t){let{defaultIndex:n=0,vertical:s=!1,manual:o=!1,onChange:i,selectedIndex:c=null,...u}=e;const m=s?"vertical":"horizontal",v=o?"manual":"auto";let h=(0,d.T)(t),[b,g]=(0,a.useReducer)(N,{selectedIndex:null!=c?c:n,tabs:[],panels:[]}),x=(0,a.useMemo)((()=>({selectedIndex:b.selectedIndex})),[b.selectedIndex]),j=(0,p.E)(i||(()=>{})),I=(0,p.E)(b.tabs),T=(0,a.useMemo)((()=>({orientation:m,activation:v,...b})),[m,v,b]),R=(0,p.E)(b.selectedIndex),k=(0,a.useMemo)((()=>({registerTab:e=>(g({type:1,tab:e}),()=>g({type:2,tab:e})),registerPanel:e=>(g({type:3,panel:e}),()=>g({type:4,panel:e})),forceRerender(){g({type:5})},change(e){R.current!==e&&j.current(e),R.current=e,g({type:0,index:e})}})),[g]);(0,l.e)((()=>{g({type:0,index:null!=c?c:n})}),[c]);let E=(0,a.useRef)({tabs:[],panels:[]}),F={ref:h};return a.createElement(_.Provider,{value:E},a.createElement(w.Provider,{value:k},a.createElement(y.Provider,{value:T},T.tabs.length<=0&&a.createElement(f,{onFocus:()=>{var e,t;for(let n of I.current)if(0===(null==(e=n.current)?void 0:e.tabIndex))return null==(t=n.current)||t.focus(),!0;return!1}}),(0,r.sY)({ourProps:F,theirProps:u,slot:x,defaultTag:S,name:"Tabs"}))))})),R=(0,r.yV)((function(e,t){let{orientation:n,selectedIndex:a}=j("Tab.List"),s=(0,d.T)(t);return(0,r.sY)({ourProps:{ref:s,role:"tablist","aria-orientation":n},theirProps:e,slot:{selectedIndex:a},defaultTag:"div",name:"Tabs.List"})})),k=(0,r.yV)((function(e,t){var n,p;let m=`headlessui-tabs-tab-${(0,s.M)()}`,{orientation:f,activation:v,selectedIndex:b,tabs:g,panels:_}=j("Tab"),y=I("Tab"),w=x("Tab"),N=(0,a.useRef)(null),S=(0,d.T)(N,t,(e=>{!e||y.forceRerender()}));(0,l.e)((()=>y.registerTab(N)),[y,N]);let T=w.current.tabs.indexOf(m);-1===T&&(T=w.current.tabs.push(m)-1);let R=g.indexOf(N);-1===R&&(R=T);let k=R===b,E=(0,h.z)((e=>{let t=g.map((e=>e.current)).filter(Boolean);if(e.key===i.R.Space||e.key===i.R.Enter)return e.preventDefault(),e.stopPropagation(),void y.change(R);switch(e.key){case i.R.Home:case i.R.PageUp:return e.preventDefault(),e.stopPropagation(),(0,c.jA)(t,c.TO.First);case i.R.End:case i.R.PageDown:return e.preventDefault(),e.stopPropagation(),(0,c.jA)(t,c.TO.Last)}return(0,o.E)(f,{vertical:()=>e.key===i.R.ArrowUp?(0,c.jA)(t,c.TO.Previous|c.TO.WrapAround):e.key===i.R.ArrowDown?(0,c.jA)(t,c.TO.Next|c.TO.WrapAround):void 0,horizontal:()=>e.key===i.R.ArrowLeft?(0,c.jA)(t,c.TO.Previous|c.TO.WrapAround):e.key===i.R.ArrowRight?(0,c.jA)(t,c.TO.Next|c.TO.WrapAround):void 0})?e.preventDefault():void 0})),F=(0,h.z)((()=>{var e;null==(e=N.current)||e.focus()})),P=(0,h.z)((()=>{var e;null==(e=N.current)||e.focus(),y.change(R)})),A=(0,h.z)((e=>{e.preventDefault()})),O=(0,a.useMemo)((()=>({selected:k})),[k]),C=e,U={ref:S,onKeyDown:E,onFocus:"manual"===v?F:P,onMouseDown:A,onClick:P,id:m,role:"tab",type:(0,u.f)(e,N),"aria-controls":null==(p=null==(n=_[R])?void 0:n.current)?void 0:p.id,"aria-selected":k,tabIndex:k?0:-1};return(0,r.sY)({ourProps:U,theirProps:C,slot:O,defaultTag:"button",name:"Tabs.Tab"})})),E=(0,r.yV)((function(e,t){let{selectedIndex:n}=j("Tab.Panels"),s=(0,d.T)(t),o=(0,a.useMemo)((()=>({selectedIndex:n})),[n]);return(0,r.sY)({ourProps:{ref:s},theirProps:e,slot:o,defaultTag:"div",name:"Tabs.Panels"})})),F=r.AN.RenderStrategy|r.AN.Static,P=(0,r.yV)((function(e,t){var n,o;let{selectedIndex:i,tabs:c,panels:u}=j("Tab.Panel"),p=I("Tab.Panel"),m=x("Tab.Panel"),f=`headlessui-tabs-panel-${(0,s.M)()}`,v=(0,a.useRef)(null),h=(0,d.T)(v,t,(e=>{!e||p.forceRerender()}));(0,l.e)((()=>p.registerPanel(v)),[p,v]);let b=m.current.panels.indexOf(f);-1===b&&(b=m.current.panels.push(f)-1);let g=u.indexOf(v);-1===g&&(g=b);let _=g===i,y=(0,a.useMemo)((()=>({selected:_})),[_]),w=e,N={ref:h,id:f,role:"tabpanel","aria-labelledby":null==(o=null==(n=c[g])?void 0:n.current)?void 0:o.id,tabIndex:_?0:-1};return(0,r.sY)({ourProps:N,theirProps:w,slot:y,defaultTag:"div",features:F,visible:_,name:"Tabs.Panel"})})),A=Object.assign(k,{Group:T,List:R,Panels:E,Panel:P})}}]);