(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[866],{6524:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/[app_id]/[tab_id]/view/[record_id]",function(){return n(6985)}])},2767:function(e,t,n){"use strict";n.d(t,{z:function(){return l}});var a=n(6042),r=n(5893),s=n(1095),i=n(4413),o=n(1163);function l(e){var t=(0,o.useRouter)(),n=e.button,l=e.data,c=e.className,d=e.scopeClassName,u=e.inMore,m=l.dataComponentId;if("amis_action"===n.type){var p={type:"page",bodyClassName:"p-0",body:[{type:"button",label:n.label,className:"".concat(u?"":"slds-button slds-button_neutral"," ").concat(c||""),onEvent:{click:{actions:JSON.parse(n.amis_actions)}}}],regions:["body"],data:(0,a.Z)({},l)};return(0,r.jsx)(s.k,{id:SteedosUI.getRefId({type:"button",appId:l.app_id,name:n.name}),schema:p,router:t,className:d})}return(0,r.jsx)("button",{onClick:function(){return(0,i.ht)(n,Object.assign({},l,{scope:SteedosUI.getRef(m)}))},className:"slds-button slds-button_neutral ".concat(c||""),children:n.label})}},5125:function(e,t,n){"use strict";n.d(t,{B:function(){return u}});var a=n(4924),r=n(5893),s=n(4413),i=n(1163),o=n(7294),l=n(2767),c=n(1095),d=n(8282);function u(e){var t,n,u=e.app_id,m=e.tab_id,p=e.schema,f=e.refId,h=e.foreign_key,b=e.record_id,v=e.object_name,g=e.masterObjectName,_=(0,o.useState)(null),x=_[0],y=_[1],j=(0,i.useRouter)();(0,o.useEffect)((function(){p&&p.uiSchema&&y((0,s.Iv)(p.uiSchema,{app_id:u,tab_id:m,router:j}))}),[p]);var S=(0,d.Z0)(),N={type:"page",bodyClassName:"p-0",body:[{type:"form",title:"\u8868\u5355",body:[{type:"input-file",label:"",name:"file",id:"u:a58d02614e04",btnLabel:"\u4e0a\u4f20",multiple:!1,maxLength:10,submitType:"asUpload",uploadType:"fileReceptor",proxy:!1,drag:!1,autoUpload:!0,useChunk:!1,joinValues:!1,extractValue:!1,valueField:"version_id",receiver:{url:"${context.rootUrl}/s3",headers:{Authorization:"Bearer ${context.tenantId},${context.authToken}"},method:"post",messages:{},dataType:"form-data",requestAdaptor:"\n                        api.data.append('record_id', '".concat(b,"');\n                        api.data.append('object_name', '").concat(g,"');\n                        api.data.append('space', '").concat(S.space,"');\n                        api.data.append('owner', '").concat(S.userId,"');\n                        api.data.append('owner_name', '").concat(S.name,"');\n                        return api;\n                      ")},onEvent:{success:{weight:0,actions:[{componentId:"u:5f901c0b917b",args:{},actionType:"clear"},{componentId:"",args:{msgType:"success",position:"top-right",closeButton:!0,showIcon:!0,msg:"\u4e0a\u4f20\u6210\u529f"},actionType:"toast"},{componentId:"",args:{},actionType:"custom",script:"\n                                SteedosUI.getRef('".concat(f,"').getComponentByName('page.listview_").concat(v,'\').handleAction({}, { actionType: "reload"})\n                            ')}]}}}],id:"u:5f901c0b917b",wrapWithPanel:!1}],regions:["body"],data:{}};return(0,r.jsx)(r.Fragment,{children:(null===p||void 0===p?void 0:p.uiSchema)&&(0,r.jsxs)(r.Fragment,{children:[(null===p||void 0===p||null===(t=p.uiSchema)||void 0===t||null===(n=t.permissions)||void 0===n?void 0:n.allowCreate)&&(0,r.jsxs)("li",{children:["cms_files"!=p.uiSchema.name&&(0,r.jsx)("button",{onClick:function(){if("cms_files"===p.uiSchema.name);else{var e="drawer";SteedosUI.Object.newRecord({onSubmitted:function(){SteedosUI.getRef(f).getComponentByName("page.listview_".concat(p.uiSchema.name)).handleAction({},{actionType:"reload"})},onCancel:function(){SteedosUI.getRef(f).getComponentByName("page.listview_".concat(p.uiSchema.name)).handleAction({},{actionType:"reload"})},data:{data:(0,a.Z)({},h,b)},appId:u,name:SteedosUI.getRefId({type:"".concat(e,"-form"),appId:u,name:"".concat(p.uiSchema.name)}),title:"\u65b0\u5efa ".concat(p.uiSchema.label),objectName:p.uiSchema.name,recordId:"new",type:e,options:{},router:j})}},className:"slds-button slds-button_neutral",children:"\u65b0\u5efa"}),"cms_files"===p.uiSchema.name&&(0,r.jsx)(c.k,{id:SteedosUI.getRefId({type:"button",appId:u,name:"upload"}),schema:N,router:j,className:"w-full"})]}),null===x||void 0===x?void 0:x.map((function(e){return(0,r.jsx)("li",{children:(0,r.jsx)(l.z,{button:e,data:{app_id:u,tab_id:m,object_name:p.uiSchema.name,dataComponentId:SteedosUI.getRefId({type:"listview",appId:u,name:p.uiSchema.name})}})},e.name)}))]})})}},4413:function(e,t,n){"use strict";n.d(t,{ht:function(){return p},Iv:function(){return d},vU:function(){return u},ud:function(){return m}});var a=n(6486),r=n.n(a),s="__G_L_O_B_A_L__",i=function(e){var t;return"string"===typeof e?1===(t=e.split(".")).length?"#":(t.pop(),t.join(".")):"#"},o=function(e,t){return"#"!==t&&t?"string"===typeof t?a.get(e,t):void console.error("path has to be a string"):e||{}},l=function(e,t){if(e._visible&&(r().startsWith(r().trim(e._visible),"function")?(window.eval("var fun = "+e._visible),e.visible=fun):function(e){var t,n,a;return"string"===typeof e&&(t=/^{{(.+)}}$/,n=/^{{(function.+)}}$/,a=/^{{(.+=>.+)}}$/,!("string"!==typeof e||!e.match(t)||e.match(n)||e.match(a)))}(e._visible)&&(e.visible=function(t){!function(e,t,n,a){var r,l,c,d,u,m=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(void 0===t&&(t={}),d=i(n),c=o(t,d)||{},"string"!==typeof e)return e;l=e.substring(2,e.length-2),u="\n  var $user=".concat(JSON.stringify(m),";   return ")+l.replace(/\bformData\b/g,JSON.stringify(t).replace(/\bglobal\b/g,s)).replace(/\bglobal\b/g,JSON.stringify(a)).replace(new RegExp("\\b"+s+"\\b","g"),"global").replace(/rootValue/g,JSON.stringify(c));try{Function(u)()}catch(p){return r=p,console.log(r,e,n),e}}(e._visible,t.record,"#",{now:new Date},t.userSession)})),!r().isFunction(e.visible))return e.visible;try{return e.visible(t)}catch(n){}},c=function(e,t){var n=e.permissions.disabled_actions,a=r().sortBy(r().values(e.actions),"sort");return r().has(e,"allow_customActions")&&(a=r().filter(a,(function(t){return r().include(e.allow_customActions,t.name)}))),r().has(e,"exclude_actions")&&(a=r().filter(a,(function(t){return!r().include(e.exclude_actions,t.name)}))),r().each(a,(function(e){t.isMobile&&["record","record_only"].indexOf(e.on)>-1&&"standard_edit"!=e.name&&("record_only"==e.on?e.on="record_only_more":e.on="record_more")})),t.isMobile&&["cms_files","cfs.files.filerecord"].indexOf(e.name)>-1&&r().map(a,(function(e){"standard_edit"===e.name&&(e.on="record_more"),"download"===e.name&&(e.on="record")})),r().filter(a,(function(e){return r().indexOf(n,e.name)<0}))},d=function(e,t){var n=c(e,t);return r().filter(n,(function(e){return"list"==e.on&&l(e,t)}))},u=function(e,t){var n=c(e,t);return r().filter(n,(function(e){return("record"==e.on||"record_only"==e.on)&&l(e,t)}))},m=function(e,t){var n=c(e,t);return r().filter(n,(function(e){return("record_more"==e.on||"record_only_more"==e.on)&&l(e,t)}))},p=function(e,t){if(e.todo)return r().isString(e.todo)&&r().startsWith(r().trim(e.todo),"function")&&(window.eval("var fun = "+e.todo),e.todo=fun),r().isFunction(e.todo)?e.todo.apply({},[t]):void 0}},6985:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return I},default:function(){return w}});var a=n(1351),r=n(5893),s=(n(5152),n(6859),n(7294)),i=n(1163),o=n(6195),l=n(1095),c=n(9808),d=n(471),u=n(8390),m=n(4413),p=n(2767),f=n(7733);function h(e){var t,n,a,o,l=e.schema,c=(0,i.useRouter)(),h=c.query,b=h.app_id,v=h.tab_id,g=h.record_id,_=(0,s.useState)(null),x=_[0],y=_[1],j=(0,s.useState)(null),S=j[0],N=j[1],I=(0,s.useState)(null),w=I[0],T=I[1];return(0,s.useEffect)((function(){l&&(!function(e){e&&e.uiSchema&&(N((0,m.vU)(e.uiSchema,{app_id:b,tab_id:v,router:c})),T((0,m.ud)(e.uiSchema,{app_id:b,tab_id:v,router:c})))}(l),window.addEventListener("message",(function(e){var t=e.data;if("record.loaded"===t.type){var n=t.record;y(n)}})))}),[l]),(0,r.jsx)("div",{className:"slds-page-header slds-page-header_record-home bg-white shadow-none border-none p-0 pb-4",children:(0,r.jsxs)("div",{className:"slds-page-header__row",children:[(0,r.jsx)("div",{className:"slds-page-header__col-title",children:(0,r.jsxs)("div",{className:"slds-media",children:[(0,r.jsx)("div",{className:"slds-media__figure",children:(0,r.jsx)("span",{className:"slds-icon_container slds-icon-standard-opportunity",children:(0,r.jsx)("svg",{className:"slds-icon slds-page-header__icon","aria-hidden":"true",children:(0,r.jsx)("use",{xlinkHref:"/assets/icons/standard-sprite/svg/symbols.svg#".concat(l.uiSchema.icon)})})})}),(0,r.jsx)("div",{className:"slds-media__body",children:(0,r.jsx)("div",{className:"slds-page-header__name",children:(0,r.jsx)("div",{className:"slds-page-header__name-title",children:(0,r.jsxs)("div",{className:"",children:[(0,r.jsx)("span",{children:null===l||void 0===l||null===(t=l.uiSchema)||void 0===t?void 0:t.label}),(0,r.jsx)("span",{className:"slds-page-header__title slds-truncate",children:x?x[null===l||void 0===l||null===(n=l.uiSchema)||void 0===n?void 0:n.NAME_FIELD_KEY]:""})]})})})})]})}),(0,r.jsx)("div",{className:"slds-page-header__col-actions",children:(0,r.jsx)("div",{className:"slds-page-header__controls",children:(0,r.jsx)("div",{className:"slds-page-header__control",children:(0,r.jsxs)("ul",{className:"slds-button-group-list",children:[(null===l||void 0===l||null===(a=l.uiSchema)||void 0===a||null===(o=a.permissions)||void 0===o?void 0:o.allowEdit)&&(0,r.jsx)("li",{children:(0,r.jsx)("button",{onClick:function(){var e=f.Z.listView.editRecordMode;SteedosUI.Object.editRecord({appId:b,name:SteedosUI.getRefId({type:"".concat(e,"-form")}),title:"\u7f16\u8f91 ".concat(l.uiSchema.label),objectName:l.uiSchema.name,recordId:g,type:e,options:{},router:c,onSubmitted:function(){SteedosUI.getRef(SteedosUI.getRefId({type:"detail",appId:b,name:l.uiSchema.name})).getComponentById("detail_".concat(g)).reload()}})},className:"slds-button slds-button_neutral",children:"\u7f16\u8f91"})}),(0,r.jsxs)(r.Fragment,{children:[null===S||void 0===S?void 0:S.map((function(e){return(0,r.jsx)("li",{children:(0,r.jsx)(p.z,{button:e,data:{app_id:b,tab_id:v,object_name:l.uiSchema.name,dataComponentId:"".concat(b,"-").concat(v,"-").concat(g)}})},e.name)})),(null===w||void 0===w?void 0:w.length)>0&&(0,r.jsx)("li",{children:(0,r.jsxs)(d.v,{as:"div",className:"slds-dropdown-trigger slds-dropdown-trigger_click",children:[(0,r.jsx)("div",{children:(0,r.jsx)(d.v.Button,{className:"slds-button slds-button_icon-border-filled slds-button_last",children:(0,r.jsx)("div",{children:(0,r.jsx)("svg",{focusable:"false","data-key":"down","aria-hidden":"true",className:"slds-button__icon",children:(0,r.jsx)("use",{xlinkHref:"/assets/icons/utility-sprite/svg/symbols.svg#down"})})})})}),(0,r.jsx)(u.u,{as:s.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,r.jsx)(d.v.Items,{className:"absolute right-0 z-10 mt-1 w-56 origin-top-right divide-y divide-gray-100 bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:rounded-[2px]",children:(0,r.jsx)("div",{className:"",children:w.map((function(e,t){return(0,r.jsx)(d.v.Item,{children:function(t){var n=t.active;return(0,r.jsx)(p.z,{button:e,inMore:!0,data:{app_id:b,tab_id:v,object_name:l.uiSchema.name},className:"".concat(n?"bg-violet-500 text-white":"text-gray-900"," slds-dropdown__item group flex w-full items-center border-0 px-2 py-2")})}},t)}))})})})]})})]})]})})})})]})})}var b=n(6042),v=n(9396),g=n(5125),_=n(1664),x=n.n(_),y=function(e){var t=e.schema,n=e.object_name,a=e.foreign_key,i=e.app_id,o=e.record_id,l=e.masterObjectName,c=e.refId,d=(0,s.useState)(),u=d[0],m=d[1];return(0,s.useEffect)((function(){t&&window.addEventListener("message",(function(e){"listview.loaded"===e.data.type&&t&&setTimeout((function(){var e=SteedosUI.getRefId({type:"related_list",appId:i,name:"".concat(n,"-").concat(a)});if(SteedosUI.getRef(e)&&SteedosUI.getRef(e).getComponentByName){var r=SteedosUI.getRef(e).getComponentByName("page.listview_".concat(t.uiSchema.name));m({count:r.props.data.count})}}),300)}))}),[t]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("header",{className:"slds-media slds-media--center slds-has-flexi-truncate",children:[(0,r.jsx)("div",{"aria-hidden":"true",className:"slds-media__figure stencil slds-avatar slds-avatar_small",children:(0,r.jsx)("div",{style:{backgroundColor:"#3c97dd"},className:"extraSmall forceEntityIcon",children:(0,r.jsx)("span",{className:"uiImage",children:(0,r.jsx)("svg",{className:"slds-icon slds-page-header__icon","aria-hidden":"true",children:(0,r.jsx)("use",{xlinkHref:"/assets/icons/standard-sprite/svg/symbols.svg#".concat(t.uiSchema.icon)})})})})}),(0,r.jsx)("div",{className:"slds-media__body",children:(0,r.jsx)("h2",{className:"slds-card__header-title",children:(0,r.jsx)(x(),{href:"/app/".concat(i,"/").concat(l,"/").concat(o,"/").concat(n,"/grid?related_field_name=").concat(a),children:(0,r.jsx)("a",{className:"slds-card__header-link baseCard__header-title-container",children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"slds-truncate slds-m-right--xx-small",children:t.uiSchema.label}),(0,r.jsxs)("span",{className:"slds-shrink-none slds-m-right--xx-small",children:["(",null===u||void 0===u?void 0:u.count,")"]})]})})})})})]}),(0,r.jsx)("div",{className:"slds-no-flex",children:(0,r.jsx)("div",{className:"actionsContainer",children:(0,r.jsx)("ul",{className:"branding-actions slds-button-group slds-m-left--xx-small small oneActionsRibbon forceActionsContainer",children:(0,r.jsx)(g.B,{foreign_key:a,record_id:o,refId:c,app_id:i,tab_id:n,object_name:n,masterObjectName:l,schema:t})})})})]})};function j(e){var t=e.schema,n=e.object_name,a=e.foreign_key,s=e.app_id,o=(e.record_id,e.masterObjectName,(0,i.useRouter)()),c=SteedosUI.getRefId({type:"related_list",appId:s,name:"".concat(n,"-").concat(a)});return(0,r.jsxs)("article",{className:"slds-card slds-card_boundary shadow-none border-slate-200",children:[(0,r.jsx)("div",{className:"slds-grid slds-page-header rounded-b-none p-2",children:t&&(0,r.jsx)(y,(0,b.Z)({refId:c},e))}),(0,r.jsx)("div",{className:"border-t",children:t&&(0,r.jsx)(l.k,{id:c,schema:t.amisSchema,router:o,className:"steedos-listview"})})]})}var S=function(e){var t=e.app_id,n=e.record_id,a=e.relateds;return(0,r.jsx)(r.Fragment,{children:null===a||void 0===a?void 0:a.map((function(e){return(0,r.jsx)(j,(0,v.Z)((0,b.Z)({},e),{app_id:t,record_id:n}),"".concat(e.object_name,"-").concat(e.foreign_key))}))})};function N(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}var I=!0;function w(e){e=null!==e?e:(0,a.Z)(new TypeError("Cannot destructure undefined"));var t=(0,i.useRouter)(),n=t.query,d=n.app_id,u=n.tab_id,m=n.record_id,p=(0,s.useState)(!1),f=p[0],b=p[1],v=(0,s.useState)(null),g=v[0],_=v[1],x=(0,s.useState)(null),y=x[0],j=x[1],I=(0,s.useState)(null),w=I[0],T=I[1],R=function(){w&&k(u,m,w)};(0,s.useEffect)((function(){window.innerWidth<768?T("SMALL"):T("LARGE")}),[]),(0,s.useEffect)((function(){R()}),[t]),(0,s.useEffect)((function(){f?w&&E(u,m,w):R()}),[w]);var k=function(e,t,n){if(e&&t){var a=(0,o.ke)(d,e,t,n),r=(0,o.DM)(e,t,{formFactor:n});Promise.all([a,r]).then((function(e){j(e[0]);var t=e[1];_(t),b(!1)}))}},E=function(e,t,n){e&&t&&(0,o.KR)(e,{recordId:t,tabId:e,appId:d,formFactor:n}).then((function(e){_(e),b(!0)}))},P=function(){return[{label:"\u8be6\u60c5",name:"detail",component:function(){return(0,r.jsx)(r.Fragment,{children:(null===g||void 0===g?void 0:g.amisSchema)&&(0,r.jsx)(l.k,{id:SteedosUI.getRefId({type:"detail",appId:d,name:g.uiSchema.name}),schema:(null===g||void 0===g?void 0:g.amisSchema)||{},router:t})})}},{label:"\u76f8\u5173",name:"relateds",component:function(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(S,{app_id:d,record_id:m,relateds:y})})}}]};return(0,r.jsxs)("div",{className:"slds-grid slds-wrap",children:[(0,r.jsx)("div",{className:"slds-col slds-size_1-of-1 row region-header",children:g&&(0,r.jsx)(h,{schema:g})}),(0,r.jsx)("div",{className:"slds-col slds-size_1-of-1 row region-main",children:(0,r.jsx)("div",{className:"z-9 relative mt-2 shadow-none border-none",children:(0,r.jsxs)(c.O.Group,{vertical:!0,children:[(0,r.jsx)(c.O.List,{className:"flex space-x-1 border-b",children:P().map((function(e){return(0,r.jsx)(c.O,{className:function(e){return N("px-10","text-base",e.selected?"border-b-2 border-sky-500 text-black":"text-current")},children:e.label},e.name)}))}),(0,r.jsx)(c.O.Panels,{className:"my-2",children:P().map((function(e){return(0,r.jsx)(c.O.Panel,{className:N("bg-white sm:rounded-b-xl","pt-2"),children:e.component()},e.name)}))})]})})})]})}},9808:function(e,t,n){"use strict";n.d(t,{O:function(){return A}});var a=n(7294),r=n(2351),s=n(9946),i=n(2984),o=n(1363),l=n(4575),c=n(6723),d=n(3784),u=n(4157),m=n(3855),p=n(6045);function f({onFocus:e}){let[t,n]=(0,a.useState)(!0);return t?a.createElement(p._,{as:"button",type:"button",features:p.A.Focusable,onFocus:t=>{t.preventDefault();let a,r=50;a=requestAnimationFrame((function t(){if(!(r--<=0))return e()?(n(!1),void cancelAnimationFrame(a)):void(a=requestAnimationFrame(t));a&&cancelAnimationFrame(a)}))}}):null}var h,b=n(3781),v=((h=v||{})[h.SetSelectedIndex=0]="SetSelectedIndex",h[h.RegisterTab=1]="RegisterTab",h[h.UnregisterTab=2]="UnregisterTab",h[h.RegisterPanel=3]="RegisterPanel",h[h.UnregisterPanel=4]="UnregisterPanel",h[h.ForceRerender=5]="ForceRerender",h);let g={0(e,t){let n=e.tabs.filter((e=>{var t;return!(null!=(t=e.current)&&t.hasAttribute("disabled"))}));if(t.index<0)return{...e,selectedIndex:e.tabs.indexOf(n[0])};if(t.index>e.tabs.length)return{...e,selectedIndex:e.tabs.indexOf(n[n.length-1])};let a=e.tabs.slice(0,t.index),r=[...e.tabs.slice(t.index),...a].find((e=>n.includes(e)));return r?{...e,selectedIndex:e.tabs.indexOf(r)}:e},1:(e,t)=>e.tabs.includes(t.tab)?e:{...e,tabs:(0,l.z2)([...e.tabs,t.tab],(e=>e.current))},2:(e,t)=>({...e,tabs:(0,l.z2)(e.tabs.filter((e=>e!==t.tab)),(e=>e.current))}),3:(e,t)=>e.panels.includes(t.panel)?e:{...e,panels:[...e.panels,t.panel]},4:(e,t)=>({...e,panels:e.panels.filter((e=>e!==t.panel))}),5:e=>({...e})},_=(0,a.createContext)(null);function x(e){let t=(0,a.useContext)(_);if(null===t){let t=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,x),t}return t}_.displayName="TabsSSRContext";let y=(0,a.createContext)(null);function j(e){let t=(0,a.useContext)(y);if(null===t){let t=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,j),t}return t}y.displayName="TabsDataContext";let S=(0,a.createContext)(null);function N(e){let t=(0,a.useContext)(S);if(null===t){let t=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,N),t}return t}function I(e,t){return(0,i.E)(t.type,g,e,t)}S.displayName="TabsActionsContext";let w=a.Fragment,T=(0,r.yV)((function(e,t){let{defaultIndex:n=0,vertical:s=!1,manual:i=!1,onChange:o,selectedIndex:l=null,...u}=e;const p=s?"vertical":"horizontal",h=i?"manual":"auto";let b=(0,d.T)(t),[v,g]=(0,a.useReducer)(I,{selectedIndex:null!=l?l:n,tabs:[],panels:[]}),x=(0,a.useMemo)((()=>({selectedIndex:v.selectedIndex})),[v.selectedIndex]),j=(0,m.E)(o||(()=>{})),N=(0,m.E)(v.tabs),T=(0,a.useMemo)((()=>({orientation:p,activation:h,...v})),[p,h,v]),R=(0,m.E)(v.selectedIndex),k=(0,a.useMemo)((()=>({registerTab:e=>(g({type:1,tab:e}),()=>g({type:2,tab:e})),registerPanel:e=>(g({type:3,panel:e}),()=>g({type:4,panel:e})),forceRerender(){g({type:5})},change(e){R.current!==e&&j.current(e),R.current=e,g({type:0,index:e})}})),[g]);(0,c.e)((()=>{g({type:0,index:null!=l?l:n})}),[l]);let E=(0,a.useRef)({tabs:[],panels:[]}),P={ref:b};return a.createElement(_.Provider,{value:E},a.createElement(S.Provider,{value:k},a.createElement(y.Provider,{value:T},T.tabs.length<=0&&a.createElement(f,{onFocus:()=>{var e,t;for(let n of N.current)if(0===(null==(e=n.current)?void 0:e.tabIndex))return null==(t=n.current)||t.focus(),!0;return!1}}),(0,r.sY)({ourProps:P,theirProps:u,slot:x,defaultTag:w,name:"Tabs"}))))})),R=(0,r.yV)((function(e,t){let{orientation:n,selectedIndex:a}=j("Tab.List"),s=(0,d.T)(t);return(0,r.sY)({ourProps:{ref:s,role:"tablist","aria-orientation":n},theirProps:e,slot:{selectedIndex:a},defaultTag:"div",name:"Tabs.List"})})),k=(0,r.yV)((function(e,t){var n,m;let p=`headlessui-tabs-tab-${(0,s.M)()}`,{orientation:f,activation:h,selectedIndex:v,tabs:g,panels:_}=j("Tab"),y=N("Tab"),S=x("Tab"),I=(0,a.useRef)(null),w=(0,d.T)(I,t,(e=>{!e||y.forceRerender()}));(0,c.e)((()=>y.registerTab(I)),[y,I]);let T=S.current.tabs.indexOf(p);-1===T&&(T=S.current.tabs.push(p)-1);let R=g.indexOf(I);-1===R&&(R=T);let k=R===v,E=(0,b.z)((e=>{let t=g.map((e=>e.current)).filter(Boolean);if(e.key===o.R.Space||e.key===o.R.Enter)return e.preventDefault(),e.stopPropagation(),void y.change(R);switch(e.key){case o.R.Home:case o.R.PageUp:return e.preventDefault(),e.stopPropagation(),(0,l.jA)(t,l.TO.First);case o.R.End:case o.R.PageDown:return e.preventDefault(),e.stopPropagation(),(0,l.jA)(t,l.TO.Last)}return(0,i.E)(f,{vertical:()=>e.key===o.R.ArrowUp?(0,l.jA)(t,l.TO.Previous|l.TO.WrapAround):e.key===o.R.ArrowDown?(0,l.jA)(t,l.TO.Next|l.TO.WrapAround):void 0,horizontal:()=>e.key===o.R.ArrowLeft?(0,l.jA)(t,l.TO.Previous|l.TO.WrapAround):e.key===o.R.ArrowRight?(0,l.jA)(t,l.TO.Next|l.TO.WrapAround):void 0})?e.preventDefault():void 0})),P=(0,b.z)((()=>{var e;null==(e=I.current)||e.focus()})),O=(0,b.z)((()=>{var e;null==(e=I.current)||e.focus(),y.change(R)})),A=(0,b.z)((e=>{e.preventDefault()})),C=(0,a.useMemo)((()=>({selected:k})),[k]),F=e,U={ref:w,onKeyDown:E,onFocus:"manual"===h?P:O,onMouseDown:A,onClick:O,id:p,role:"tab",type:(0,u.f)(e,I),"aria-controls":null==(m=null==(n=_[R])?void 0:n.current)?void 0:m.id,"aria-selected":k,tabIndex:k?0:-1};return(0,r.sY)({ourProps:U,theirProps:F,slot:C,defaultTag:"button",name:"Tabs.Tab"})})),E=(0,r.yV)((function(e,t){let{selectedIndex:n}=j("Tab.Panels"),s=(0,d.T)(t),i=(0,a.useMemo)((()=>({selectedIndex:n})),[n]);return(0,r.sY)({ourProps:{ref:s},theirProps:e,slot:i,defaultTag:"div",name:"Tabs.Panels"})})),P=r.AN.RenderStrategy|r.AN.Static,O=(0,r.yV)((function(e,t){var n,i;let{selectedIndex:o,tabs:l,panels:u}=j("Tab.Panel"),m=N("Tab.Panel"),p=x("Tab.Panel"),f=`headlessui-tabs-panel-${(0,s.M)()}`,h=(0,a.useRef)(null),b=(0,d.T)(h,t,(e=>{!e||m.forceRerender()}));(0,c.e)((()=>m.registerPanel(h)),[m,h]);let v=p.current.panels.indexOf(f);-1===v&&(v=p.current.panels.push(f)-1);let g=u.indexOf(h);-1===g&&(g=v);let _=g===o,y=(0,a.useMemo)((()=>({selected:_})),[_]),S=e,I={ref:b,id:f,role:"tabpanel","aria-labelledby":null==(i=null==(n=l[g])?void 0:n.current)?void 0:i.id,tabIndex:_?0:-1};return(0,r.sY)({ourProps:I,theirProps:S,slot:y,defaultTag:"div",features:P,visible:_,name:"Tabs.Panel"})})),A=Object.assign(k,{Group:T,List:R,Panels:E,Panel:O})},6045:function(e,t,n){"use strict";n.d(t,{A:function(){return s},_:function(){return i}});var a=n(2351);var r,s=((r=s||{})[r.None=1]="None",r[r.Focusable=2]="Focusable",r[r.Hidden=4]="Hidden",r);let i=(0,a.yV)((function(e,t){let{features:n=1,...r}=e,s={ref:t,"aria-hidden":2===(2&n)||void 0,style:{position:"absolute",width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...4===(4&n)&&2!==(2&n)&&{display:"none"}}};return(0,a.sY)({ourProps:s,theirProps:r,slot:{},defaultTag:"div",name:"Hidden"})}))},1351:function(e,t,n){"use strict";function a(e){throw e}n.d(t,{Z:function(){return a}})}},function(e){e.O(0,[499,774,888,179],(function(){return t=6524,e(e.s=t);var t}));var t=e.O();_N_E=t}]);