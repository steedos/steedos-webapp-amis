(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[234],{2591:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/[app_id]/[tab_id]/view/new",function(){return n(5767)}])},5767:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return d},default:function(){return p}});var r=n(1351),a=n(5893),l=(n(5152),n(6859),n(7294)),s=n(1163),o=n(6195),i=n(1095),u=n(9808);function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}var d=!0;function p(e){e=null!==e?e:(0,r.Z)(new TypeError("Cannot destructure undefined"));var t,n=(0,s.useRouter)(),d=n.query,p=d.app_id,f=d.tab_id,b=d.record_id,m=void 0===b?"new":b,x=(0,l.useState)(null),v=x[0],h=x[1],T=(0,l.useState)(null),g=T[0],y=T[1];(0,l.useEffect)((function(){window.innerWidth<768?y("SMALL"):y("LARGE")}),[]),(0,l.useEffect)((function(){w(f,m,g)}),[g]);var w=function(e,t,n){e&&t&&(0,o.KR)(e,{recordId:t,tabId:e,appId:p,formFactor:n}).then((function(e){h(e)}))};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"z-9 relative ",children:(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsx)("div",{className:"pointer-events-auto w-full text-[0.8125rem] leading-5",children:(0,a.jsx)("div",{className:"",children:(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("div",{className:"inline-block text-2xl font-extrabold tracking-tight text-slate-900 dark:text-slate-200 sm:text-3xl",children:["\u521b\u5efa ",null===v||void 0===v||null===(t=v.uiSchema)||void 0===t?void 0:t.label]}),(0,a.jsxs)("div",{className:"ml-6 flex flex-nowrap space-x-2 fill-slate-400",children:[(0,a.jsx)("button",{onClick:function(){n.back()},className:"antd-Button py-0.5 px-3 text-slate-700 border-solid border-1 border-gray-300 sm:rounded-[2px]",children:"\u53d6\u6d88"}),(0,a.jsx)("button",{onClick:function(e){SteedosUI.getRef(SteedosUI.getRefId({type:"form",appId:p,name:v.uiSchema.name})).getComponentByName("page_edit_".concat(m,".form_edit_").concat(m)).handleAction({},{type:"submit"}).then((function(e){e&&n.push("/app/".concat(p,"/").concat(f,"/view/").concat(e.recordId))}))},className:"antd-Button bg-sky-500 py-0.5 px-3 font-semibold text-white hover:bg-sky-600 focus:outline-none sm:rounded-[2px]",children:"\u63d0\u4ea4"})]})]})})})})}),(0,a.jsx)("div",{className:"z-9 relative mt-2 ",children:(0,a.jsxs)(u.O.Group,{vertical:!0,children:[(0,a.jsx)(u.O.List,{className:"flex space-x-1 p-2",children:(0,a.jsx)(u.O,{className:function(e){return c("w-full max-w-[15rem] pb-2","",e.selected?"border-b-2 border-sky-500":"")},children:"\u57fa\u672c\u4fe1\u606f"},"detail")}),(0,a.jsx)(u.O.Panels,{className:"mt-0",children:(0,a.jsx)(u.O.Panel,{className:c("bg-white sm:rounded-b-xl",""),children:(null===v||void 0===v?void 0:v.amisSchema)&&(0,a.jsx)(i.k,{id:SteedosUI.getRefId({type:"form",appId:p,name:v.uiSchema.name}),schema:(null===v||void 0===v?void 0:v.amisSchema)||{},router:n})},"detail")})]})})]})}},9808:function(e,t,n){"use strict";n.d(t,{O:function(){return _}});var r=n(7294),a=n(2351),l=n(9946),s=n(2984),o=n(1363),i=n(4575),u=n(6723),c=n(3784),d=n(4157),p=n(3855),f=n(6045);function b({onFocus:e}){let[t,n]=(0,r.useState)(!0);return t?r.createElement(f._,{as:"button",type:"button",features:f.A.Focusable,onFocus:t=>{t.preventDefault();let r,a=50;r=requestAnimationFrame((function t(){if(!(a--<=0))return e()?(n(!1),void cancelAnimationFrame(r)):void(r=requestAnimationFrame(t));r&&cancelAnimationFrame(r)}))}}):null}var m,x=n(3781),v=((m=v||{})[m.SetSelectedIndex=0]="SetSelectedIndex",m[m.RegisterTab=1]="RegisterTab",m[m.UnregisterTab=2]="UnregisterTab",m[m.RegisterPanel=3]="RegisterPanel",m[m.UnregisterPanel=4]="UnregisterPanel",m[m.ForceRerender=5]="ForceRerender",m);let h={0(e,t){let n=e.tabs.filter((e=>{var t;return!(null!=(t=e.current)&&t.hasAttribute("disabled"))}));if(t.index<0)return{...e,selectedIndex:e.tabs.indexOf(n[0])};if(t.index>e.tabs.length)return{...e,selectedIndex:e.tabs.indexOf(n[n.length-1])};let r=e.tabs.slice(0,t.index),a=[...e.tabs.slice(t.index),...r].find((e=>n.includes(e)));return a?{...e,selectedIndex:e.tabs.indexOf(a)}:e},1:(e,t)=>e.tabs.includes(t.tab)?e:{...e,tabs:(0,i.z2)([...e.tabs,t.tab],(e=>e.current))},2:(e,t)=>({...e,tabs:(0,i.z2)(e.tabs.filter((e=>e!==t.tab)),(e=>e.current))}),3:(e,t)=>e.panels.includes(t.panel)?e:{...e,panels:[...e.panels,t.panel]},4:(e,t)=>({...e,panels:e.panels.filter((e=>e!==t.panel))}),5:e=>({...e})},T=(0,r.createContext)(null);function g(e){let t=(0,r.useContext)(T);if(null===t){let t=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,g),t}return t}T.displayName="TabsSSRContext";let y=(0,r.createContext)(null);function w(e){let t=(0,r.useContext)(y);if(null===t){let t=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,w),t}return t}y.displayName="TabsDataContext";let P=(0,r.createContext)(null);function I(e){let t=(0,r.useContext)(P);if(null===t){let t=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,I),t}return t}function R(e,t){return(0,s.E)(t.type,h,e,t)}P.displayName="TabsActionsContext";let E=r.Fragment,N=(0,a.yV)((function(e,t){let{defaultIndex:n=0,vertical:l=!1,manual:s=!1,onChange:o,selectedIndex:i=null,...d}=e;const f=l?"vertical":"horizontal",m=s?"manual":"auto";let x=(0,c.T)(t),[v,h]=(0,r.useReducer)(R,{selectedIndex:null!=i?i:n,tabs:[],panels:[]}),g=(0,r.useMemo)((()=>({selectedIndex:v.selectedIndex})),[v.selectedIndex]),w=(0,p.E)(o||(()=>{})),I=(0,p.E)(v.tabs),N=(0,r.useMemo)((()=>({orientation:f,activation:m,...v})),[f,m,v]),S=(0,p.E)(v.selectedIndex),k=(0,r.useMemo)((()=>({registerTab:e=>(h({type:1,tab:e}),()=>h({type:2,tab:e})),registerPanel:e=>(h({type:3,panel:e}),()=>h({type:4,panel:e})),forceRerender(){h({type:5})},change(e){S.current!==e&&w.current(e),S.current=e,h({type:0,index:e})}})),[h]);(0,u.e)((()=>{h({type:0,index:null!=i?i:n})}),[i]);let A=(0,r.useRef)({tabs:[],panels:[]}),j={ref:x};return r.createElement(T.Provider,{value:A},r.createElement(P.Provider,{value:k},r.createElement(y.Provider,{value:N},N.tabs.length<=0&&r.createElement(b,{onFocus:()=>{var e,t;for(let n of I.current)if(0===(null==(e=n.current)?void 0:e.tabIndex))return null==(t=n.current)||t.focus(),!0;return!1}}),(0,a.sY)({ourProps:j,theirProps:d,slot:g,defaultTag:E,name:"Tabs"}))))})),S=(0,a.yV)((function(e,t){let{orientation:n,selectedIndex:r}=w("Tab.List"),l=(0,c.T)(t);return(0,a.sY)({ourProps:{ref:l,role:"tablist","aria-orientation":n},theirProps:e,slot:{selectedIndex:r},defaultTag:"div",name:"Tabs.List"})})),k=(0,a.yV)((function(e,t){var n,p;let f=`headlessui-tabs-tab-${(0,l.M)()}`,{orientation:b,activation:m,selectedIndex:v,tabs:h,panels:T}=w("Tab"),y=I("Tab"),P=g("Tab"),R=(0,r.useRef)(null),E=(0,c.T)(R,t,(e=>{!e||y.forceRerender()}));(0,u.e)((()=>y.registerTab(R)),[y,R]);let N=P.current.tabs.indexOf(f);-1===N&&(N=P.current.tabs.push(f)-1);let S=h.indexOf(R);-1===S&&(S=N);let k=S===v,A=(0,x.z)((e=>{let t=h.map((e=>e.current)).filter(Boolean);if(e.key===o.R.Space||e.key===o.R.Enter)return e.preventDefault(),e.stopPropagation(),void y.change(S);switch(e.key){case o.R.Home:case o.R.PageUp:return e.preventDefault(),e.stopPropagation(),(0,i.jA)(t,i.TO.First);case o.R.End:case o.R.PageDown:return e.preventDefault(),e.stopPropagation(),(0,i.jA)(t,i.TO.Last)}return(0,s.E)(b,{vertical:()=>e.key===o.R.ArrowUp?(0,i.jA)(t,i.TO.Previous|i.TO.WrapAround):e.key===o.R.ArrowDown?(0,i.jA)(t,i.TO.Next|i.TO.WrapAround):void 0,horizontal:()=>e.key===o.R.ArrowLeft?(0,i.jA)(t,i.TO.Previous|i.TO.WrapAround):e.key===o.R.ArrowRight?(0,i.jA)(t,i.TO.Next|i.TO.WrapAround):void 0})?e.preventDefault():void 0})),j=(0,x.z)((()=>{var e;null==(e=R.current)||e.focus()})),O=(0,x.z)((()=>{var e;null==(e=R.current)||e.focus(),y.change(S)})),_=(0,x.z)((e=>{e.preventDefault()})),C=(0,r.useMemo)((()=>({selected:k})),[k]),F=e,D={ref:E,onKeyDown:A,onFocus:"manual"===m?j:O,onMouseDown:_,onClick:O,id:f,role:"tab",type:(0,d.f)(e,R),"aria-controls":null==(p=null==(n=T[S])?void 0:n.current)?void 0:p.id,"aria-selected":k,tabIndex:k?0:-1};return(0,a.sY)({ourProps:D,theirProps:F,slot:C,defaultTag:"button",name:"Tabs.Tab"})})),A=(0,a.yV)((function(e,t){let{selectedIndex:n}=w("Tab.Panels"),l=(0,c.T)(t),s=(0,r.useMemo)((()=>({selectedIndex:n})),[n]);return(0,a.sY)({ourProps:{ref:l},theirProps:e,slot:s,defaultTag:"div",name:"Tabs.Panels"})})),j=a.AN.RenderStrategy|a.AN.Static,O=(0,a.yV)((function(e,t){var n,s;let{selectedIndex:o,tabs:i,panels:d}=w("Tab.Panel"),p=I("Tab.Panel"),f=g("Tab.Panel"),b=`headlessui-tabs-panel-${(0,l.M)()}`,m=(0,r.useRef)(null),x=(0,c.T)(m,t,(e=>{!e||p.forceRerender()}));(0,u.e)((()=>p.registerPanel(m)),[p,m]);let v=f.current.panels.indexOf(b);-1===v&&(v=f.current.panels.push(b)-1);let h=d.indexOf(m);-1===h&&(h=v);let T=h===o,y=(0,r.useMemo)((()=>({selected:T})),[T]),P=e,R={ref:x,id:b,role:"tabpanel","aria-labelledby":null==(s=null==(n=i[h])?void 0:n.current)?void 0:s.id,tabIndex:T?0:-1};return(0,a.sY)({ourProps:R,theirProps:P,slot:y,defaultTag:"div",features:j,visible:T,name:"Tabs.Panel"})})),_=Object.assign(k,{Group:N,List:S,Panels:A,Panel:O})},6045:function(e,t,n){"use strict";n.d(t,{A:function(){return l},_:function(){return s}});var r=n(2351);var a,l=((a=l||{})[a.None=1]="None",a[a.Focusable=2]="Focusable",a[a.Hidden=4]="Hidden",a);let s=(0,r.yV)((function(e,t){let{features:n=1,...a}=e,l={ref:t,"aria-hidden":2===(2&n)||void 0,style:{position:"absolute",width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...4===(4&n)&&2!==(2&n)&&{display:"none"}}};return(0,r.sY)({ourProps:l,theirProps:a,slot:{},defaultTag:"div",name:"Hidden"})}))},1351:function(e,t,n){"use strict";function r(e){throw e}n.d(t,{Z:function(){return r}})}},function(e){e.O(0,[499,774,888,179],(function(){return t=2591,e(e.s=t);var t}));var t=e.O();_N_E=t}]);